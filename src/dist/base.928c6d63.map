{"version":3,"sources":["js/base.js"],"names":["ELEMENT","CARD_CONTENT","CONTINUE_BUTTON","CARD_SECTION","OVERLAY","OVERLAY_IMAGE","OVERLAY_CAPTION","OVERLAY_CLOSE","OVERLAY_LEFT","OVERLAY_RIGHT","PHOTOS","CLASS_NAME","YEAR_SECTION","EVENT","CLICK","SCROLL","KEYDOWN","STATE","SHOWN","IN_VIEW","Card","scrollPosition_","cardContentEl_","document","querySelector","continueButtonEl_","cardSectionEl_","getElementById","cardSectionHeight_","offsetHeight","yearSectionEl_","overlayEl_","overlayImageEl_","overlayCaptionEl_","overlayCloseEl_","overlayLeftEl_","overlayRightEl_","photoEls_","querySelectorAll","photoData_","setImageHeights_","createEventListeners_","buildPhotoData_","photoEl","photoUrl","dataset","src","photoCaption","nextElementSibling","innerHTML","replace","push","addEventListener","e","click","window","startScrollPosition","scrollPosition","pageYOffset","documentElement","scrollTop","body","scrollHandler_","openOverlay_","target","preventDefault","clickedEl","classList","contains","findElementOrAncestorWithClass_","closeOverlay_","previousOverlaySlide_","nextOverlaySlide_","keyCode","yearInView","ticking","requestAnimationFrame","add","lazyLoadImages_","yearPhotoEls","i","photo","setTimeout","removeAttribute","bind","imageEl","initialHeight","offsetWidth","setAttribute","lockScroll_","overlayShown","imgSource","imgZoomSource","getAttribute","imgZoomCaption","fillOverlayContent_","unlockScroll_","remove","currentUrl","nextSlideUrl","nextSlideCaption","slide","previousSlide","length","nextSlide","parseFloat","element","className","parent","parentNode","console","log"],"mappings":"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","file":"base.928c6d63.map","sourceRoot":"..","sourcesContent":["/** Defines DOM selectors */\nconst ELEMENT = {\n  CARD_CONTENT : '.card__content',\n  CONTINUE_BUTTON : '.card__continue',\n  CARD_SECTION : 'card',\n  OVERLAY : '.overlay',\n  OVERLAY_IMAGE : '.overlay__image',\n  OVERLAY_CAPTION : '.overlay__caption',\n  OVERLAY_CLOSE : '.overlay__close',\n  OVERLAY_LEFT : '.overlay__left-button',\n  OVERLAY_RIGHT : '.overlay__right-button',\n  PHOTOS : '.grid__photo'\n}\n\n/** Defines names */\nconst CLASS_NAME = {\n  CARD_SECTION : 'card',\n  YEAR_SECTION : 'year',\n  OVERLAY : 'overlay',\n  OVERLAY_CLOSE : 'overlay__close',\n  OVERLAY_LEFT : 'overlay__left-button',\n  OVERLAY_RIGHT : 'overlay__right-button',\n  PHOTOS : 'grid__photo'\n}\n\n/** Defines Event types */\nconst EVENT = {\n  CLICK : 'click',\n  SCROLL : 'scroll',\n  KEYDOWN : 'keydown'\n}\n\n/** Defines state types */\nconst STATE = {\n  SHOWN : '--shown',\n  IN_VIEW : '--in-view'\n}\n\nexport default class Card {\n  constructor() {\n    /** @private {number} Sets the initial scroll position */\n    this.scrollPosition_ = 0;\n\n    /** @private {Element} */\n    this.cardContentEl_ = document.querySelector(ELEMENT.CARD_CONTENT);\n\n    /** @private {Element} */\n    this.continueButtonEl_ = document.querySelector(ELEMENT.CONTINUE_BUTTON);\n\n    /** @private {Element} */\n    this.cardSectionEl_ = document.getElementById(CLASS_NAME.CARD_SECTION);\n\n    /** @private {number} */\n    this.cardSectionHeight_ = this.cardSectionEl_.offsetHeight;\n\n    /** @private {Element} */\n    this.yearSectionEl_ = document.getElementById(CLASS_NAME.YEAR_SECTION);\n\n    /** @private {Element} */\n    this.overlayEl_ = document.querySelector(ELEMENT.OVERLAY);\n\n    /** @private {Element} */\n    this.overlayImageEl_ = document.querySelector(ELEMENT.OVERLAY_IMAGE);\n\n    /** @private {Element} */\n    this.overlayCaptionEl_ = document.querySelector(ELEMENT.OVERLAY_CAPTION);\n\n    /** @private {Element} */\n    this.overlayCloseEl_ = document.querySelector(ELEMENT.OVERLAY_CLOSE);\n\n    /** @private {Element} */\n    this.overlayLeftEl_ = document.querySelector(ELEMENT.OVERLAY_LEFT);\n\n    /** @private {Element} */\n    this.overlayRightEl_ = document.querySelector(ELEMENT.OVERLAY_RIGHT);\n\n    /** @private {Nodelist} */\n    this.photoEls_ = document.querySelectorAll(ELEMENT.PHOTOS);\n\n    /** @private {array} */\n    this.photoData_ = [];\n\n    this.setImageHeights_();\n    this.createEventListeners_();\n    this.buildPhotoData_();\n  }\n\n  /**\n   * Builds a photo data object from the <figure> elements on the page\n   * @private\n   */\n  buildPhotoData_() {\n    for (let photoEl of this.photoEls_) {\n      let photoUrl = photoEl.dataset.src;\n      // let photoUrl = photoUrl.replace(/-800/i, '-1500');\n      let photoCaption =\n          photoEl.nextElementSibling.innerHTML.replace(/^\\s+|\\s+$/g, '');\n      this.photoData_.push(\n          {'photoUrl' : photoUrl, 'photoCaption' : photoCaption});\n    }\n  }\n\n  /**\n   * Sets up all event listeners on the page\n   * @private\n   */\n  createEventListeners_() {\n    // Adds scroll to year section from entire card content area.\n    this.cardContentEl_.addEventListener(\n        EVENT.CLICK, e => { this.continueButtonEl_.click(); }, false, this);\n\n    // Adds scroll event listener.\n    window.addEventListener(EVENT.SCROLL, e => {\n      let startScrollPosition = this.scrollPosition_;\n      // Firefox doesn't support document.body.scrollTop.\n      let scrollPosition = window.pageYOffset ||\n                           document.documentElement.scrollTop ||\n                           document.body.scrollTop || 0;\n      this.scrollPosition_ = scrollPosition;\n      this.scrollHandler_(startScrollPosition, this.scrollPosition_);\n    });\n\n    // Adds an event listener for photos.\n    this.yearSectionEl_.addEventListener(\n        EVENT.CLICK, e => { this.openOverlay_(e.target); }, false, this);\n\n    // Adds an event listener for the overlay close, previous, and next buttons,\n    // and overlay background.\n    this.overlayEl_.addEventListener('click', e => {\n      e.preventDefault();\n      let clickedEl = e.target;\n      if (clickedEl.classList.contains(CLASS_NAME.OVERLAY) ||\n          this.findElementOrAncestorWithClass_(clickedEl,\n                                               CLASS_NAME.OVERLAY_CLOSE)) {\n        this.closeOverlay_();\n      } else if (this.findElementOrAncestorWithClass_(\n                     clickedEl, CLASS_NAME.OVERLAY_LEFT)) {\n        this.previousOverlaySlide_();\n      } else if (this.findElementOrAncestorWithClass_(\n                     clickedEl, CLASS_NAME.OVERLAY_RIGHT)) {\n        this.nextOverlaySlide_();\n      }\n    }, false, this);\n\n    // Adds event listeners for keyboard presses for the overlay.\n    window.addEventListener(EVENT.KEYDOWN, e => {\n      if (!this.overlayEl_.classList.contains(CLASS_NAME.OVERLAY +\n                                              STATE.SHOWN)) {\n        return;\n      }\n      switch (e.keyCode) {\n      case 37:\n        this.overlayLeftEl_.click();\n        break;\n      case 39:\n        this.overlayRightEl_.click();\n        break;\n      case 27:\n        this.overlayCloseEl_.click();\n        break;\n      }\n    }, false);\n  }\n\n  /**\n   * Handles scroll.\n   * @param {number} startScrollPosition\n   * @param {number} scrollPosition\n   * @private\n   */\n  scrollHandler_(startScrollPosition, scrollPosition) {\n    let yearInView = CLASS_NAME.YEAR_SECTION + STATE.IN_VIEW;\n    if (!this.ticking) {\n      window.requestAnimationFrame(() => {\n        if (this.scrollPosition_ >\n            this.cardSectionHeight_ - (this.cardSectionHeight_ / 2)) {\n          if (!this.yearSectionEl_.classList.contains(yearInView)) {\n            this.yearSectionEl_.classList.add(yearInView);\n            this.lazyLoadImages_();\n          }\n        }\n        this.ticking = false;\n      });\n    }\n    this.ticking = true;\n  }\n\n  /**\n   * Starts loading images within a given month.\n   * @private\n   */\n  lazyLoadImages_() {\n    let yearPhotoEls = this.yearSectionEl_.querySelectorAll(ELEMENT.PHOTOS);\n    // for (let photo of yearPhotoEls) {\n    for (var i = 0, photo; photo = yearPhotoEls[i]; i++) {\n      photo.src = photo.dataset.src;\n      photo.classList.add(CLASS_NAME.PHOTOS + STATE.SHOWN);\n      // Removes data-src and height attributes after a staggered delay.\n      setTimeout(function() {\n        // Binds \"this\" to photo.\n        delete this.dataset.src;\n        this.removeAttribute('height');\n      }.bind(photo, i), 200 * i);\n    }\n  }\n\n  /**\n   * Sets image initial heights manually before they have been lazy loaded.\n   * @private\n   */\n  setImageHeights_() {\n    for (let imageEl of this.photoEls_) {\n      // Images are at a 3:2 ratio.\n      let initialHeight = imageEl.offsetWidth * .67;\n      imageEl.setAttribute('height', initialHeight);\n    }\n  }\n\n  /**\n   * Builds and shows overlay.\n   * @param {string} photoUrl\n   * @private\n   */\n  openOverlay_(photoEl) {\n    this.lockScroll_();\n    let overlayShown = CLASS_NAME.OVERLAY + STATE.SHOWN;\n    let imgSource = photoEl;\n    if (!photoEl.classList.contains(CLASS_NAME.PHOTOS)) {\n      return;\n    }\n\n    let imgZoomSource = imgSource.getAttribute('src');\n    // imgZoomSource = imgZoomSource.replace(/-800/i, '-1500');\n    let imgZoomCaption = imgSource.nextElementSibling.innerHTML;\n    this.fillOverlayContent_(imgZoomSource, imgZoomCaption);\n    this.overlayEl_.classList.add(overlayShown);\n  }\n\n  /**\n   * Fills the overlay with content.\n   * @param {string} photoUrl\n   * @param {string} photoCaption\n   * @private\n   */\n  fillOverlayContent_(photoUrl, photoCaption) {\n    this.overlayImageEl_.setAttribute('src','');\n    this.overlayImageEl_.setAttribute('src', photoUrl);\n    this.overlayCaptionEl_.innerHTML = photoCaption;\n  }\n\n  /**\n   * Closes the overlay\n   * @private\n   */\n  closeOverlay_() {\n    this.unlockScroll_();\n    let overlayShown = CLASS_NAME.OVERLAY + STATE.SHOWN;\n    if (!this.overlayEl_.classList.contains(overlayShown)) {\n      return;\n    }\n    this.overlayEl_.classList.remove(overlayShown);\n  }\n\n  /**\n   * Advances the overlay content back based on photo data.\n   * @private\n   */\n  previousOverlaySlide_() {\n    let currentUrl = this.overlayImageEl_.getAttribute('src');\n    let nextSlideUrl;\n    let nextSlideCaption;\n    for (let slide in this.photoData_) {\n      // Matches the overlay's current photo with it's position in the array.\n      if (this.photoData_[slide]['photoUrl'] == currentUrl) {\n        let previousSlide;\n        if (slide - 1 < 0) {\n          previousSlide = this.photoEls_.length - 1;\n        } else {\n          previousSlide = slide - 1;\n        }\n        nextSlideUrl = this.photoData_[previousSlide]['photoUrl'];\n        nextSlideCaption = this.photoData_[previousSlide]['photoCaption'];\n        this.fillOverlayContent_(nextSlideUrl, nextSlideCaption);\n        break;\n      }\n    }\n  }\n\n  /**\n   * Advances the overlay content forward based on photo data.\n   * @private\n   */\n  nextOverlaySlide_() {\n    let currentUrl = this.overlayImageEl_.getAttribute('src');\n    let nextSlideUrl;\n    let nextSlideCaption;\n    for (let slide in this.photoData_) {\n      // Matches the overlay's current photo with it's position in the array.\n      if (this.photoData_[slide]['photoUrl'] == currentUrl) {\n        let nextSlide;\n        if (parseFloat(slide) + 1 == this.photoEls_.length) {\n          nextSlide = 0;\n        } else {\n          nextSlide = parseFloat(slide) + 1;\n        }\n        nextSlideUrl = this.photoData_[nextSlide]['photoUrl'];\n        nextSlideCaption = this.photoData_[nextSlide]['photoCaption'];\n        this.fillOverlayContent_(nextSlideUrl, nextSlideCaption);\n        break;\n      }\n    }\n  }\n\n  /**\n   * Locks scroll.\n   * @private\n   */\n  lockScroll_() {\n    if (document.body.classList.contains('scroll-locked')) {\n      return;\n    }\n    document.body.classList.add('scroll-locked');\n  }\n\n  /**\n   * Unlocks scroll.\n   * @private\n   */\n  unlockScroll_() {\n    if (!document.body.classList.contains('scroll-locked')) {\n      return;\n    }\n    document.body.classList.remove('scroll-locked');\n  }\n\n  /**\n   * Traverses up the DOM to find an ancestor with a class.\n   * @param {Element} element The element to start searching.\n   * @param {string} className The class name to match.\n   * @private\n   */\n  findElementOrAncestorWithClass_(element, className) {\n    if (!element || element.length === 0) {\n      return false;\n    }\n    var parent = element;\n    do {\n      if (parent === document) {\n        break;\n      }\n      if (parent.classList.contains(className)) {\n        return true;\n      }\n    } while (parent = parent.parentNode);\n    return false;\n  }\n}\n\nconsole.log('card', Card);"]}